# 🧪 新功能测试指南 - v1.2

## ⚡ 快速测试（5 分钟）

### 测试 1：自定义出发地点 🌍

#### 步骤：
1. **打开应用**
   - 看到新的"选择出发地点"卡片

2. **点击地点选择卡片**
   - 弹出地点选择器
   - 看到 3 个选项：
     - 当前位置（顶部）
     - 预设地点（网格）
     - 从地图选择（底部）

3. **测试预设地点**
   - [ ] 点击"日本东京"🗼
   - [ ] 看到选中标记（绿色对勾）
   - [ ] 自动返回设置界面
   - [ ] 地点卡片显示"日本东京"

4. **测试其他城市**
   - [ ] 再次点击地点卡片
   - [ ] 选择"美国纽约"🗽
   - [ ] 验证切换成功

5. **测试当前位置**
   - [ ] 点击"使用当前位置"
   - [ ] 验证切换回当前位置

#### 预期结果：
- ✅ 地点选择器界面美观
- ✅ 网格布局整齐
- ✅ 选中状态清晰
- ✅ 切换流畅无卡顿
- ✅ 中英文显示正确

---

### 测试 2：探索式地图 🗺️

#### 步骤：
1. **准备旅程**
   - 选择"日本东京"作为出发地
   - 选择"Cycling"
   - 选择"5 min"

2. **开始旅程**
   - [ ] 点击"Start Journey"
   - [ ] 等待路线计算（2-5 秒）

3. **观察地图变化**
   - [ ] **起点**：看到绿色圆点
   - [ ] **虚拟角色**：蓝色圆圈，有脉动效果
   - [ ] **路线**：一开始只显示很短的路线
   - [ ] **终点**：看不到终点标记（神秘感）

4. **观察路线揭示**
   - [ ] 等待 30 秒
   - [ ] 路线逐渐延长
   - [ ] 虚拟角色沿路线移动
   - [ ] 已走过的路线显示为蓝色

5. **观察 POI 气泡**
   - [ ] 等待 60 秒（POI 检测）
   - [ ] 如果发现 POI，看到：
     - 黄色圆形标记
     - 白色气泡弹出
     - 显示 POI 名称和类别
   - [ ] 气泡 5 秒后自动隐藏
   - [ ] 点击黄色标记可重新显示

6. **观察终点出现**
   - [ ] 当进度接近 95%
   - [ ] 红色旗帜图标出现
   - [ ] 标记目的地位置

#### 预期结果：
- ✅ 路线逐渐揭示（不是一开始全显示）
- ✅ 虚拟角色有脉动动画
- ✅ POI 气泡样式美观
- ✅ 终点在接近时才显示
- ✅ 整体探索感强

---

## 🎨 视觉检查清单

### 地点选择器

**布局：**
- [ ] 2 列网格整齐
- [ ] 卡片大小一致
- [ ] 间距协调
- [ ] 滚动流畅

**样式：**
- [ ] Emoji 图标清晰
- [ ] 文字可读
- [ ] 选中状态明显（蓝色边框）
- [ ] 玻璃效果自然

**交互：**
- [ ] 按压有缩放动画
- [ ] 选中有视觉反馈
- [ ] 切换流畅

### 探索地图

**标记：**
- [ ] 起点：绿色圆点 + 白边
- [ ] 虚拟角色：蓝色圆圈 + 脉动
- [ ] POI：黄色圆圈 + 星星
- [ ] 终点：红色旗帜（95%+）

**路线：**
- [ ] 蓝色渐变
- [ ] 线条粗细适中（5px）
- [ ] 逐渐延伸
- [ ] 平滑过渡

**气泡：**
- [ ] 白色背景
- [ ] 黄色边框
- [ ] 阴影效果
- [ ] 圆角设计
- [ ] 文字清晰

**动画：**
- [ ] 脉动效果流畅
- [ ] 气泡弹出自然
- [ ] 路线延伸平滑
- [ ] 相机跟随顺畅

---

## 🌍 预设地点测试

### 亚洲城市

- [ ] **东京** - 35.6762, 139.6503
  - 验证路线生成
  - 检查 POI 发现（如：东京塔、浅草寺）

- [ ] **首尔** - 37.5665, 126.9780
  - 验证路线生成
  - 检查 POI 发现（如：景福宫、明洞）

- [ ] **北京** - 39.9042, 116.4074
  - 验证路线生成
  - 检查 POI 发现（如：天安门、故宫）

### 美洲城市

- [ ] **纽约** - 40.7128, -74.0060
  - 验证路线生成
  - 检查 POI 发现（如：自由女神像、中央公园）

- [ ] **旧金山** - 37.7749, -122.4194
  - 验证路线生成
  - 检查 POI 发现（如：金门大桥、渔人码头）

### 欧洲城市

- [ ] **伦敦** - 51.5074, -0.1278
  - 验证路线生成
  - 检查 POI 发现（如：大本钟、伦敦眼）

- [ ] **巴黎** - 48.8566, 2.3522
  - 验证路线生成
  - 检查 POI 发现（如：埃菲尔铁塔、卢浮宫）

---

## 🔍 详细功能测试

### 功能 1：地点切换

**测试步骤：**
1. 选择"东京"
2. 开始旅程
3. 取消旅程
4. 切换到"纽约"
5. 再次开始旅程

**验证点：**
- [ ] 地点切换成功
- [ ] 路线在不同城市正确生成
- [ ] 地图中心正确定位

### 功能 2：路线揭示

**测试步骤：**
1. 开始旅程
2. 观察进度 0% → 25% → 50% → 75% → 100%

**验证点：**
- [ ] 0%：只显示起点
- [ ] 25%：路线延伸到 1/4
- [ ] 50%：路线延伸到 1/2
- [ ] 75%：路线延伸到 3/4
- [ ] 95%：终点出现
- [ ] 100%：完整路线显示

### 功能 3：POI 气泡

**测试步骤：**
1. 等待发现 POI
2. 观察气泡弹出
3. 等待 5 秒
4. 观察气泡隐藏
5. 点击黄色标记
6. 观察气泡重新显示

**验证点：**
- [ ] 气泡自动弹出
- [ ] 显示 POI 名称
- [ ] 显示 POI 类别
- [ ] 5 秒后自动隐藏
- [ ] 点击可切换显示

---

## 🎯 对比测试

### 旧版 vs 新版

| 特性 | 旧版 | 新版 |
|------|------|------|
| **出发地点** | 仅当前位置 | 当前位置 + 12 城市 + 自定义 |
| **路线显示** | 一开始全显示 | 逐渐揭示 |
| **终点显示** | 一开始就看到 | 95% 后才显示 |
| **POI 标记** | 简单星星 | 气泡 + 标记 |
| **探索感** | 弱 | 强 ✨ |

---

## 📊 性能测试

### 地图性能

**测试场景：**
- 长距离旅程（60 分钟）
- 多个 POI 发现（10+）
- 频繁暂停/继续

**验证点：**
- [ ] 地图渲染流畅（60 FPS）
- [ ] 路线延伸无卡顿
- [ ] 气泡动画流畅
- [ ] 内存使用合理（< 150 MB）

---

## ✅ 测试通过标准

### 必须通过

- [ ] 所有预设地点可选择
- [ ] 地点切换正常工作
- [ ] 路线逐渐揭示
- [ ] 虚拟角色有脉动动画
- [ ] POI 气泡正确显示
- [ ] 终点在 95% 后出现
- [ ] 无崩溃或严重错误

### 建议通过

- [ ] 所有动画流畅
- [ ] UI 美观协调
- [ ] 中英文显示正确
- [ ] 性能表现良好

---

## 🐛 已知问题

### 地图选择器
- ⚠️ 自定义地点选择功能是占位符
- 💡 建议使用预设地点

### POI 气泡
- ⚠️ 多个 POI 可能重叠
- 💡 点击切换显示

---

## 📝 测试报告模板

```
测试日期：____________________
测试设备：____________________
iOS 版本：____________________

功能测试：
- 地点选择：[ ] 通过 [ ] 失败
- 路线揭示：[ ] 通过 [ ] 失败
- POI 气泡：[ ] 通过 [ ] 失败
- 终点显示：[ ] 通过 [ ] 失败

视觉测试：
- 地点选择器：[ ] 通过 [ ] 失败
- 探索地图：[ ] 通过 [ ] 失败
- 动画效果：[ ] 通过 [ ] 失败

性能测试：
- 地图流畅度：[ ] 通过 [ ] 失败
- 内存使用：[ ] 通过 [ ] 失败

问题记录：
1. ________________________________
2. ________________________________
3. ________________________________

总体评价：
[ ] 优秀 [ ] 良好 [ ] 需要改进

测试人：____________________
```

---

## 🎉 测试完成

如果所有测试通过，恭喜！新功能已经可以：
- ✅ 正常使用
- ✅ 提供良好体验
- ✅ 准备发布

---

**祝测试顺利！享受探索的乐趣！** 🚀
