# WeatherKit é…ç½®æŒ‡å—

## å½“å‰çŠ¶æ€

WeatherKit åŠŸèƒ½å·²é›†æˆåˆ°åº”ç”¨ä¸­ï¼Œä½†éœ€è¦æ­£ç¡®çš„é…ç½®æ‰èƒ½åœ¨çœŸæœºä¸Šå·¥ä½œã€‚

## é”™è¯¯è¯´æ˜

ä½ çœ‹åˆ°çš„é”™è¯¯ï¼š
```
Failed to generate jwt token for: com.apple.weatherkit.authservice with error: 
Error Domain=WeatherDaemon.WDSJWTAuthenticatorServiceListener.Errors Code=2
```

è¿™æ˜¯**æ­£å¸¸çš„**ï¼Œå› ä¸ºï¼š
1. WeatherKit åœ¨æ¨¡æ‹Ÿå™¨ä¸Šä¸å·¥ä½œ
2. éœ€è¦æœ‰æ•ˆçš„ Apple Developer è´¦å·
3. éœ€è¦åœ¨ App ID ä¸­å¯ç”¨ WeatherKit æƒé™

## é…ç½®æ­¥éª¤ï¼ˆçœŸæœºéƒ¨ç½²ï¼‰

### 1. Apple Developer Portal é…ç½®

1. ç™»å½• [Apple Developer Portal](https://developer.apple.com)
2. è¿›å…¥ **Certificates, Identifiers & Profiles**
3. é€‰æ‹© **Identifiers**
4. æ‰¾åˆ°æˆ–åˆ›å»ºä½ çš„ App IDï¼ˆä¾‹å¦‚ï¼š`com.yourcompany.tikkuufocus`ï¼‰
5. ç¼–è¾‘ App IDï¼Œå¯ç”¨ **WeatherKit** æƒé™
6. ä¿å­˜æ›´æ”¹

### 2. Xcode é¡¹ç›®é…ç½®

1. æ‰“å¼€ Xcode é¡¹ç›®
2. é€‰æ‹©é¡¹ç›® target â†’ **Signing & Capabilities**
3. ç‚¹å‡» **+ Capability**
4. æ·»åŠ  **WeatherKit**
5. ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Team å’Œ Bundle ID

### 3. éªŒè¯é…ç½®

åœ¨çœŸæœºä¸Šè¿è¡Œåº”ç”¨ï¼Œæ£€æŸ¥ï¼š
- ä¸å†å‡ºç° JWT token é”™è¯¯
- å¤©æ°”æ•°æ®èƒ½æ­£å¸¸è·å–
- èƒŒæ™¯æ¸å˜æ ¹æ®å¤©æ°”å˜åŒ–

## å¼€å‘ç¯å¢ƒå¤„ç†

ä»£ç å·²ç»ä¼˜åŒ–ï¼Œåœ¨å¼€å‘/æ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸‹ï¼š
- âœ… ä¸ä¼šæ˜¾ç¤ºé‡å¤çš„é”™è¯¯æ—¥å¿—
- âœ… åº”ç”¨æ­£å¸¸è¿è¡Œï¼Œåªæ˜¯æ²¡æœ‰å¤©æ°”æ•°æ®
- âœ… ä½¿ç”¨é»˜è®¤çš„æ¸å˜èƒŒæ™¯

## WeatherKit åŠŸèƒ½

å½“ WeatherKit æ­£å¸¸å·¥ä½œæ—¶ï¼Œåº”ç”¨ä¼šï¼š

1. **åŠ¨æ€èƒŒæ™¯**ï¼šæ ¹æ®å¤©æ°”æ¡ä»¶æ”¹å˜èƒŒæ™¯æ¸å˜
   - æ™´å¤©ï¼šæ˜äº®çš„è“è‰²
   - é˜´å¤©ï¼šç°è“è‰²
   - é›¨å¤©ï¼šæ·±è“ç°è‰²
   - é›ªå¤©ï¼šç™½è“è‰²
   - å¤œæ™šï¼šæ·±ç´«è“è‰²

2. **å¤©æ°”å›¾æ ‡**ï¼šæ˜¾ç¤ºå½“å‰å¤©æ°”çŠ¶å†µçš„å›¾æ ‡

3. **æ¸©åº¦æ˜¾ç¤º**ï¼šæ˜¾ç¤ºå½“å‰æ¸©åº¦

## ä¸´æ—¶ç¦ç”¨ WeatherKitï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³å®Œå…¨ç¦ç”¨ WeatherKit åŠŸèƒ½ï¼Œå¯ä»¥ï¼š

### æ–¹æ³• 1ï¼šæ³¨é‡Šæ‰å¤©æ°”è·å–è°ƒç”¨

åœ¨ `SetupView.swift` ä¸­æ³¨é‡Šæ‰ï¼š
```swift
// fetchWeatherForSelectedLocation()
```

### æ–¹æ³• 2ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®

ä¿®æ”¹ `WeatherManager.swift`ï¼Œæ·»åŠ æ¨¡æ‹Ÿå¤©æ°”æ•°æ®ï¼š
```swift
#if DEBUG
// åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
currentWeather = MockWeather.sunny
#endif
```

## è´¹ç”¨è¯´æ˜

WeatherKit ä½¿ç”¨ Apple çš„å¤©æ°”æœåŠ¡ï¼š
- æ¯æœˆå‰ 500,000 æ¬¡è°ƒç”¨å…è´¹
- è¶…å‡ºåæ¯ 1,000 æ¬¡è°ƒç”¨ $0.50
- å¯¹äºä¸ªäººåº”ç”¨ï¼Œå…è´¹é¢åº¦å®Œå…¨è¶³å¤Ÿ

## æ¨èåšæ³•

### å¼€å‘é˜¶æ®µ
- åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå¼€å‘ï¼Œå¿½ç•¥ WeatherKit é”™è¯¯
- åº”ç”¨åŠŸèƒ½ä¸å—å½±å“

### æµ‹è¯•é˜¶æ®µ
- åœ¨çœŸæœºä¸Šæµ‹è¯•ï¼Œé…ç½® WeatherKit
- éªŒè¯å¤©æ°”åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### å‘å¸ƒé˜¶æ®µ
- ç¡®ä¿ App ID å¯ç”¨äº† WeatherKit
- åœ¨ App Store Connect ä¸­é…ç½®æ­£ç¡®çš„æƒé™

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šçœŸæœºä¸Šä»ç„¶æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ Bundle ID æ˜¯å¦åŒ¹é…
2. ç¡®è®¤ Provisioning Profile åŒ…å« WeatherKit æƒé™
3. æ¸…ç†é¡¹ç›®ï¼šProduct â†’ Clean Build Folder
4. é‡æ–°å®‰è£…åº”ç”¨

### é—®é¢˜ï¼šå¤©æ°”æ•°æ®ä¸æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤ä½ç½®æƒé™å·²æˆäºˆ
3. æŸ¥çœ‹ Xcode æ§åˆ¶å°çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

### é—®é¢˜ï¼šæƒ³è¦æ›´é¢‘ç¹çš„å¤©æ°”æ›´æ–°

**å½“å‰è¡Œä¸º**ï¼š
- é€‰æ‹©åœ°ç‚¹æ—¶è·å–ä¸€æ¬¡å¤©æ°”
- åœ°ç‚¹æ”¹å˜æ—¶é‡æ–°è·å–

**å¯ä»¥æ”¹è¿›**ï¼š
- æ·»åŠ å®šæ—¶åˆ·æ–°ï¼ˆæ¯ 30 åˆ†é’Ÿï¼‰
- åœ¨ journey å¼€å§‹æ—¶åˆ·æ–°
- æ·»åŠ æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

## ç›¸å…³æ–‡ä»¶

- `WeatherManager.swift` - å¤©æ°”ç®¡ç†å™¨
- `SetupView.swift` - ä½¿ç”¨å¤©æ°”æ•°æ®
- `WeatherBackgroundView.swift` - å¤©æ°”èƒŒæ™¯è§†å›¾
- `AnimatedGradientBackground.swift` - æ¸å˜èƒŒæ™¯

## å‚è€ƒèµ„æ–™

- [WeatherKit Documentation](https://developer.apple.com/documentation/weatherkit)
- [WeatherKit REST API](https://developer.apple.com/documentation/weatherkitrestapi)
- [App Store Connect Help](https://help.apple.com/app-store-connect/)

## æ€»ç»“

âœ… **å½“å‰çŠ¶æ€**ï¼šä»£ç å·²ä¼˜åŒ–ï¼Œå¼€å‘ç¯å¢ƒä¸‹ä¸ä¼šæœ‰é—®é¢˜
âš ï¸ **çœŸæœºéƒ¨ç½²**ï¼šéœ€è¦é…ç½® WeatherKit æƒé™
ğŸ¯ **æ¨è**ï¼šå…ˆå®Œæˆå…¶ä»–åŠŸèƒ½å¼€å‘ï¼Œæœ€åå†é…ç½® WeatherKit
